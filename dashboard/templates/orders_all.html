{% extends "dashboard.html" %}
{% load humanize %}
{% block content %}

<script type="text/javascript">
  setInterval(function(){
    window.location.reload();
  }, 60000);  //3000‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ=30‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
</script>   
<style>
  .form-check-input {
      display: none; /* ‡∏ã‡πà‡∏≠‡∏ô radio button ‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏° */
  }
  .custom-radio {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 2px solid #ccc; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô */
      border-radius: 50%; /* ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏° */
      background-color: white; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≤‡∏ß */
      cursor: pointer;
      position: relative;
  }
  .form-check-input:checked + .custom-radio {
      background-color: green; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
      border: 2px solid green; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
  }
  /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö radio button ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò */
  .form-check-input:checked + .custom-radio.reject {
      background-color: red; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
      border: 2px solid red; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
  }

   /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö label  */
.form-group {
  position: relative;
  border: 1px solid #ced4da; /* ‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏° */
  border-radius: 5px;       /* ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
  padding-top: 15px;        /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö label */
}

.floating-label {
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  background-color: white;
  padding: 0 5px;
  transition: 0.2s;
  color: #6c757d;
  pointer-events: none;
}

.form-control:focus + .floating-label,
.form-control:not(:placeholder-shown) + .floating-label {
  top: -10px;
  font-size: 12px;
  color: #007bff;
  padding: 0 5px;
}


</style>

<div class="table-responsive">
  <table class="table table-hover">
    <thead class="table table-secondary">
      <tr>
        <th scope="col">n</th>
        <th scope="col">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</th>
        <th scope="col">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å</th>
        <th scope="col">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
        <th scope="col" >‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
        <th scope="col" style="width: 5px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏¥‡∏Å</th>
        <th scope="col" class="text-center">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
        <th scope="col" class="text-center">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</th>
        <th scope="col" class="text-center">‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å‡∏Å‡∏î‡∏¢‡∏±‡∏ô‡∏¢‡∏±‡∏ô</th>
        <th scope="col" class="text-center">‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
        <th scope="col">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
        <!-- <th scope="col">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢</th> -->
      </tr>
    </thead>
    {% for order in orders_all %}
    <tbody>
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td scope="row">{{ order.user.get_full_name }}</td>
        <td scope="row">ID {{ order.id }}</td>
        <td scope="row">{{ order.items.count }} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</td>
        <td scope="row" >{{ order.get_total_price|intcomma }} ‡∏ø</td>
        <td scope="row" style="font-size: 14px; ">{{ order.date_created| date:"d M Y, H:i" }} ‡∏ô.</td>


        {% if order.status == True and order.confirm == True %}
        <th scope="row" class="text-center"><span class="badge bg-success">‡πÄ‡∏ö‡∏¥‡∏Å‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span></td>
        {% elif order.status == True %}
        <th scope="row" class="text-center"><span class="badge bg-success">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</span></td>
        {% elif order.status == False %}
        <th scope="row" class="text-center"><span class="badge bg-danger">‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</span></td>
        {% else %} 
        <th scope="row" class="text-center"><span class="badge bg-warning">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£..</span></td>

        {% endif %}


        <td scope="col" class="text-center">
          {% if order.status == None %}
          <!-- <strong class="text-warning">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥..</td> -->
          <span class="badge bg-warning">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥..</span>
          {% elif order.status and order.pay_item == False %}
            <button class="btn btn-warning btn-sm" data-bs-toggle="modal"
              data-bs-target="#exampleModal4{{ order.id }}">
              ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢
            </button>
          {% elif order.status == False and order.pay_item == False %}
          <i class="bi bi-x-circle-fill text-danger "></i>
          {% else %}
          <span class="badge bg-success">‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÅ‡∏•‡πâ‡∏ß</span>
          {% endif %}
        </td>


        <td scope="col" class="text-center">
          {% if order.status == None %}
          <!-- <strong scope="row" class="text-warning text-center">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥..</strong> -->
          <span class="badge bg-warning">‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥..</span>
          {% elif order.confirm == True %}
          <span class="badge bg-success">‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÅ‡∏•‡πâ‡∏ß</span>
          {% elif order.status == False and order.pay_item == False %}
          <i class="bi bi-x-circle-fill text-danger text-center"></i>
          {% else %}
          <span class="badge bg-danger">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏™‡∏î‡∏∏!</span>
          {% endif %}
        </td>

        <td scope="col" class="text-center"><!-- Button trigger modal -->
          {% if order.status == None %}
          <button type="button" class="btn btn-success btn-sm" data-bs-toggle="modal"
            data-bs-target="#exampleModal{{ order.id }}">
            ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
          </button>
          <button type="button" class="btn btn-danger btn-sm" data-bs-toggle="modal"
            data-bs-target="#exampleModal2{{ order.id }}">
            ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
          </button>
          
          {% elif order.status == False %}
          <i class="bi bi-x-circle-fill text-danger"></i>
          
          {% elif order.confirm == True %}
          <i class="bi bi-check-circle-fill text-success"></i>
          
          {% elif order.confirm == False %}
          <button class="btn btn-warning btn-sm" data-bs-toggle="modal"
            data-bs-target="#exampleModal3{{ order.id }}">
            <i class="bi bi-pencil-square"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á
          </button>
         {% endif %}
        </td>
        
        <!-- Modal ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ -->
        <form action="{% url 'dashboard:approve_orders' order.id %}" method="POST">
          {% csrf_token %}
          <div class="modal fade" id="exampleModal{{ order.id }}" tabindex="-1" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="width: 20rem;">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ID {{ order.id }}</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body">
                  <div class="form-check container justify-content-center d-flex mb-3">
                    <input class="form-check-input" type="radio" name="status" id="flexRadioDefault1" 
                           value="True" checked>
                    <label class="custom-radio" for="flexRadioDefault1" ></label>
                    <label class="text-success" for="flexRadioDefault1" style="font-size: 20px;">
                        &nbsp;&nbsp;‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                    </label>
                  </div>

                  <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á -->
                  <div class="col form-floating mb-1 mt-3">
                    <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ 23:00) -->
                      <input type="datetime-local"
                          name="date_receive"
                          class="form-control form-control-sm text-secondary date-receive-input"
                          data-order-id="{{ order.id }}"
                          id="date_receive_{{ order.id }}"
                          readonly
                          style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                        <label for="date_receive_{{ order.id }}">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á</label>
                    <!-- <h6 class="text-danger text-center">**‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡πÄ‡∏ß‡∏•‡∏≤ 16:00 ‡∏ô.**</h6> -->
                  </div>

                  <!-- ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
                  <div class="text-danger small mb-3">
                    <p class="mb-1">** ‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡πÄ‡∏ß‡∏•‡∏≤ 16:00 ‡∏ô.</p>
                  </div>

                  <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ -->
                  <div class="col form-floating mb-3 mt-3">
                    <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 23:00) -->
                      <input type="datetime-local"
                            name="date_approved"
                            class="form-control form-control-sm text-secondary date-approved-input"
                            data-order-id="{{ order.id }}"
                            id="date_approved_{{ order.id }}"
                            readonly
                            style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="dateApprovedInput{{ order.id }}">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</label>
                  </div>

                  <!-- ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ -->
                  <div class="col form-floating mb-3">
                    {% if order.other == None %}
                      <input type="text" name="other" class="form-control" id="floatingOther" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" required>
                    {% else %}
                      <input type="text" value="{{ order.other }}" name="other" class="form-control" id="floatingOther" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" required>
                    {% endif %}
                    <label for="floatingOther">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                  </div>

                </div>
                <div class="modal-footer justify-content-between">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <!-- <button type="submit" class="btn btn-primary">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button> -->
                  <button class="btn btn-success" type="submit" onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...'; this.form.submit();">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>

        <!-- Modal2 ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò  -->
        <form action="{% url 'dashboard:approve_orders' order.id %}" method="POST">
          {% csrf_token %}
          <div class="modal fade" id="exampleModal2{{ order.id }}" tabindex="-1" aria-labelledby="exampleModalLabel2"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="width: 20rem;">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ID {{ order.id }}</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body">
                  
                  <div class="form-check container justify-content-center d-flex">
                      <input class="form-check-input" type="radio" name="status" id="flexRadioDefault2" 
                          value="False" checked>
                      <label class="custom-radio reject" for="flexRadioDefault2"></label>
                      <label class="text-danger" for="flexRadioDefault2" style="font-size: 20px;">
                          &nbsp;&nbsp;‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
                      </label>
                  </div>

                  <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò -->
                  <div class="col form-floating mb-3 mt-3">
                    <input type="datetime-local"
                          name="date_approved"
                          class="form-control form-control-sm text-secondary date-approved-input"
                          value="{{ now|date:'Y-m-d\\TH:i' }}"
                          id="date_approved_{{ order.id }}"
                          readonly
                          style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="dateApprovedInput{{ order.id }}">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</label>
                  </div>

                  <!-- ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ -->
                  <div class="col form-floating mb-3">
                    {% if order.other == None %}
                      <input type="text" name="other" class="form-control" id="floatingOther" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" required>
                    {% else %}
                      <input type="text" value="{{ order.other }}" name="other" class="form-control" id="floatingOther" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" required>
                    {% endif %}
                    <label for="floatingOther">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                  </div>

                </div>
                <div class="modal-footer justify-content-between">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <!-- <button type="submit" class="btn btn-primary">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button> -->
                  <button class="btn btn-success" type="submit" onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...'; this.form.submit();">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>

        <!-- Modal3 ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
        <form action="{% url 'dashboard:approve_orders' order.id %}" method="POST">
          {% csrf_token %}
          <div class="modal fade" id="exampleModal3{{ order.id }}" tabindex="-1" aria-labelledby="exampleModalLabel3"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="width: 20rem;">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á ID {{ order.id }}</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body">
                  <div class="form-check container justify-content-center d-flex mb-3">
                    <input class="form-check-input" type="radio" name="status" id="flexRadioDefault1" 
                           value="True" style="display: block;" {% if order.status == True %} checked {% endif %}>
                    <!-- <label class="custom-radio" for="flexRadioDefault1" ></label> -->
                    <label class="text-success" for="flexRadioDefault1" style="font-size: 20px;">
                        &nbsp;&nbsp;‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                    </label>
                  </div>

                  <div class="form-check container justify-content-center d-flex">
                    <input class="form-check-input" type="radio" name="status" id="flexRadioDefault2" 
                        value="False" style="display: block;" {% if order.status == False %} checked {% endif %}>
                    <!-- <label class="custom-radio reject" for="flexRadioDefault2"></label> -->
                    <label class="text-danger" for="flexRadioDefault2" style="font-size: 20px;">
                        &nbsp;&nbsp;‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
                    </label>
                  </div>

                  <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á -->
                  <div class="col form-floating mb-1 mt-3">
                    <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ 23:00) -->
                    <input type="datetime-local"
                          name="date_receive"
                          class="form-control form-control-sm text-secondary date-receive-input"
                          data-order-id="{{ order.id }}"
                          id="date_receive_{{ order.id }}"
                          readonly
                          style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="dateReceiveInput{{ order.id }}">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á</label>
                    <!-- <h6 class="text-danger text-center">**‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡πÄ‡∏ß‡∏•‡∏≤ 16:00 ‡∏ô.**</h6> -->
                  </div>

                  <!-- ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
                  <div class="text-danger small mb-3">
                    <p class="mb-1">** ‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡πÄ‡∏ß‡∏•‡∏≤ 16:00 ‡∏ô.</p>
                  </div>

                  <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ -->
                  <div class="col form-floating mb-3 mt-3">
                    <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 23:00) -->
                    <input type="datetime-local"
                          name="date_approved"
                          class="form-control form-control-sm text-secondary date-approved-input"
                          data-order-id="{{ order.id }}"
                          id="date_approved_{{ order.id }}"
                          readonly
                          style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="date_ApprovedInput_2{{ order.id }}">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥/‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</label>
                  </div>

                  <!-- ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ -->
                  <div class="col form-floating mb-3">
                    {% if order.other == None %}
                      <input type="text" name="other" class="form-control" id="floatingOther" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" required>
                    {% else %}
                      <input type="text" value="{{ order.other }}" name="other" class="form-control" id="floatingOther" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" required>
                    {% endif %}
                    <label for="floatingOther">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                  </div>

                </div>
                <div class="modal-footer justify-content-between">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <!-- <button type="submit" class="btn btn-primary">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button> -->
                  <button class="btn btn-success" type="submit" onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...'; this.form.submit();">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>



        <!-- Modal4 ‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏-->
        <form action="{% url 'dashboard:approve_pay' order.id %}" method="POST">
          {% csrf_token %}
          <div class="modal fade" id="exampleModal4{{ order.id }}" tabindex="-1" aria-labelledby="exampleModalLabel4"
            aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content mt-5" style="width: 20rem;">
                <div class="modal-header">
                  <h5 class="modal-title text-center container" id="exampleModalLabel2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏ ID {{ order.id }}</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                
                <div class="modal-body">
                  <div class="form-check container justify-content-center d-flex mb-3">
                    <input class="form-check-input" type="radio" name="pay_item" id="flexRadioDefault5" 
                           value="True" checked required>
                    <label class="custom-radio" for="flexRadioDefault5"></label>
                    <label class="form-check-label text-success" for="flexRadioDefault5" style="font-size: 20px;">
                        &nbsp;&nbsp;‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÅ‡∏•‡πâ‡∏ß
                    </label>
                  </div>
                  
                  <!-- ‡∏ä‡∏∑‡πà‡∏≠ -->
                  <div class="col form-floating mb-3 mt-3">
                    <input type="text"
                          name="name_pay"
                          class="form-control form-control-sm text-secondary"
                          value='{{ user.get_first_name }}' required readonly
                          id="name_pay"
                          style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="name_pay">‡∏ä‡∏∑‡πà‡∏≠</label>
                  </div>

                  <!-- ‡∏™‡∏Å‡∏∏‡∏• -->
                  <div class="col form-floating mb-3 mt-3">
                    <input type="text"
                          name="surname_pay"
                          class="form-control form-control-sm text-secondary"
                          value='{{ user.get_last_name }}' required readonly
                          id="surname_pay"
                          style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="surname_pay">‡∏™‡∏Å‡∏∏‡∏•</label>
                  </div>
              
                  <!-- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ -->
                  <div class="col form-floating mb-3 mt-3">
                    <input type="datetime-local"
                      name="date_pay"
                      class="form-control form-control-sm text-secondary"
                      value=""
                      id="datePayInput{{ order.id }}"
                      style="background-color: #f8f9fa; color: #6c757d; font-size: 0.85rem;">
                    <label for="datePayInput{{ order.id }}">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢‡∏û‡∏±‡∏™‡∏î‡∏∏</label>
                  </div>

                  <script>
                    document.addEventListener('DOMContentLoaded', function() {
                      const dateInput = document.getElementById('datePayInput{{ order.id }}');
                      if (dateInput) {
                        const now = new Date();
                        const year = now.getFullYear();
                        const month = String(now.getMonth() + 1).padStart(2, '0');
                        const day = String(now.getDate()).padStart(2, '0');
                        const hours = String(now.getHours()).padStart(2, '0');
                        const minutes = String(now.getMinutes()).padStart(2, '0');
                        dateInput.value = `${year}-${month}-${day}T${hours}:${minutes}`;
                      }
                    });
                  </script>

                </div>
                
                <div class="modal-footer justify-content-between">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <!-- <button class="btn btn-success" type="submit" onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...';">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button> -->
                  <button class="btn btn-success" type="submit" onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...'; this.form.submit();">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                  </button>
                </div>
              </div>
            </div>
          </div>
          {% if request.GET.success == 'true' %}
          <script>
              document.addEventListener('DOMContentLoaded', function() {
                  Swal.fire({
                      title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                      text: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',
                      icon: 'success',
                      timer: 3000,
                      showConfirmButton: false
                  }).then(function() {
                      window.location.href = "{% url 'dashboard:orders_all' %}";
                  });
              });
          </script>
          {% endif %} 
        </form>

        <td>
          <!-- Link ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ -->
          <a href="{% url 'dashboard:order_detail' order.id %}" class="btn btn-primary btn-sm">
              <i class="bi bi-card-list"></i>
          </a>&nbsp;&nbsp;
      
          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏™‡∏î‡∏∏ -->
          {% if order.status == False %}

          {% elif order.confirm == False %}
          <form method="POST" action="{% url 'app_linebot:send_receive_confirmation' order.id %}" style="display:inline">
              {% csrf_token %}
              <button type="submit" class="btn btn-warning btn-sm">
                  <i class="bi bi-envelope-fill"></i>
              </button>
          </form>
          {% endif %}
        </td>
      
      </tr>
      {% empty %}
      <tr>
        <td colspan="11" class="text-center">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</td>
      </tr>
    </tbody>
    {% endfor %}
  </table>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
      // üìå ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á: ‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÄ‡∏ß‡∏•‡∏≤ 23:00
      const dateReceiveInputs = document.querySelectorAll('.date-receive-input');
  
      dateReceiveInputs.forEach(function(input) {
          const date = new Date();
          const day = date.getDay(); // 0 = Sunday, ..., 6 = Saturday
          const daysUntilMonday = (day === 0) ? 1 : (8 - day);
          date.setDate(date.getDate() + daysUntilMonday);
          date.setHours(23, 0, 0, 0);
          const formattedDate = date.toISOString().slice(0, 16);
          input.value = formattedDate;
      });
  
      // üìå ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Local Time)
      const dateApprovedInputs = document.querySelectorAll('.date-approved-input');

      dateApprovedInputs.forEach(function(input) {
          const now = new Date();
          const year = now.getFullYear();
          const month = String(now.getMonth() + 1).padStart(2, '0');
          const day = String(now.getDate()).padStart(2, '0');
          const hours = String(now.getHours()).padStart(2, '0');
          const minutes = String(now.getMinutes()).padStart(2, '0');

          const formattedNow = `${year}-${month}-${day}T${hours}:${minutes}`;
          input.value = formattedNow;
      });
  });
</script>
  

<!-- <script>
  document.addEventListener('DOMContentLoaded', function () {
      // üìå ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á: ‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÄ‡∏ß‡∏•‡∏≤ 23:00
      const dateReceiveInputs = document.querySelectorAll('.date-receive-input');
  
      dateReceiveInputs.forEach(function(input) {
          const date = new Date();
          const day = date.getDay(); // 0 = Sunday, ..., 6 = Saturday
          const daysUntilMonday = (day === 0) ? 1 : (8 - day);
          date.setDate(date.getDate() + daysUntilMonday);
          date.setHours(23, 0, 0, 0);
          const formattedDate = date.toISOString().slice(0, 16);
          input.value = formattedDate;
      });
  
      // üìå ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡πÄ‡∏ß‡∏•‡∏≤ 23:00
      const dateApprovedInputs = document.querySelectorAll('.date-approved-input');
  
      dateApprovedInputs.forEach(function(input) {
          const date = new Date();
          date.setHours(23, 0, 0, 0);
          const formattedDate = date.toISOString().slice(0, 16);
          input.value = formattedDate;
      });
  });
  </script> -->
  

{% endblock %}
