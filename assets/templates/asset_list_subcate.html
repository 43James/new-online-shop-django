<!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢ -->

{% extends "base_sidebar.html" %}
{% block content %}

<div class="container-fluid">

  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
    id="title">
    <h1 class="h2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢‡∏Ñ‡∏£‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group me-2">
        <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
      </div>
      <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle d-flex align-items-center gap-1">
        <i class="bi bi-calendar3"></i>
        This week
      </button>
    </div>
  </div>

  <div class="row">
  </div>

  <div class="container-fluid col-md-6">
    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ -->
    <form method="get" class="mb-3 d-flex" role="search">
      <input type="text" name="q" class="form-control me-2" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏Å..." value="{{ query|default:'' }}">
      <button class="btn btn-outline-primary col-2" type="submit">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
    </form>

    {% if query %}
      <p class="text-muted">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: <strong>{{ query }}</strong></p>
    {% endif %}

    <!-- <div class="btn-group mb-3">
      <a href="{% url 'assets:add_category_asset' %}" type="button" class="btn btn-outline-success"><i
          class="bi bi-plus-circle"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</a>
    </div> -->
    <div class="btn-group mb-3">
      <button type="button" class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#addModal">
        <i class="bi bi-plus-circle"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
      </button>
    </div>

    <table class="table table-bordered table-bordered rounded-4 overflow-hidden shadow-sm">
      <thead>
        <tr>
          <th style="width: 8%;">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
          <th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å</th>
          <th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢</th>
          <th class="text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>
      <tbody>
        {% for subcategory in subcategories.object_list %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ subcategory.category }}</td>
          <td>{{ subcategory.name_sub }}</td>
          <td class="text-center">
            <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
            <button class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#editModal{{ subcategory.id }}">
              <i class="bi bi-pencil-square"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
            </button>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö -->
            <a href="{% url 'assets:delete_subcategory_asset' subcategory.id %}" class="btn btn-sm btn-danger"
              onclick="return confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?');">
              <i class="bi bi-trash"></i> ‡∏•‡∏ö
            </a>
          </td>
        </tr>

        <!-- ‚úÖ Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏•‡∏π‡∏õ) -->
        <div class="modal fade" id="editModal{{ subcategory.id }}" tabindex="-1"
          aria-labelledby="editModalLabel{{ subsubcategory.id }}" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <form method="POST" action="{% url 'assets:edit_subcategory_asset' subcategory.id %}">
                {% csrf_token %}
                <div class="modal-header">
                  <h5 class="modal-title" id="editModalLabel{{ subcategory.id }}">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <!-- ‚úÖ Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
                  <div class="mb-3">
                    <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å</label>
                    <select name="category" class="form-select text-primary" required>
                      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å --</option>
                      {% for category in categories %}
                        <option value="{{ category.id }}" {% if category.id == subcategory.category.id %}selected{% endif %}>
                          {{ category.name_cate }}
                        </option>
                      {% endfor %}
                    </select>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢</label>
                    <input type="text" name="name_sub" class="form-control text-primary" value="{{ subcategory.name_sub }}" required>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <button type="submit" class="btn btn-primary ms-2"
                    onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...'; this.form.submit();">üíæ
                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
              </form>
            </div>
          </div>
        </div>
        {% endfor %}


        <!-- ‚úÖ Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà -->
        <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <form method="POST" action="{% url 'assets:asset_list_subcate' %}">
                {% csrf_token %}
                <div class="modal-header">
                  <h5 class="modal-title" id="addModalLabel">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="modal-body">
                    <!-- ‚úÖ ‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å -->
                    <div class="mb-3">
                      <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å</label>
                      <select name="category" class="form-select" required>
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å --</option>
                        {% for category in categories %}
                          <option value="{{ category.id }}">{{ category.name_cate }}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <!-- ‚úÖ ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢ -->
                    <div class="mb-3">
                      <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢</label>
                      <input type="text" name="name_sub" class="form-control" required>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                  <button type="submit" class="btn btn-primary ms-2"
                    onclick="this.disabled=true; this.innerHTML='‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...'; this.form.submit();">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </tbody>
    </table>
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center mt-2 mb-2">
          {% if subcategories.has_previous %}
          <li class="page-item">
              <a class="page-link" href="?page=1{% if query %}&q={{ query }}{% endif %}">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
          </li>
          <li class="page-item">
              <a class="page-link" href="?page={{ subcategories.previous_page_number }}{% if query %}&q={{ query }}{% endif %}">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</a>
          </li>
          {% endif %}
    
          {% for i in subcategories.paginator.page_range %}
              {% if subcategories.number == i %}
                  <li class="page-item active"><span class="page-link">{{ i }}</span></li>
              {% elif i > subcategories.number|add:'-2' and i < subcategories.number|add:'2' %}
                  <li class="page-item"><a class="page-link" href="?page={{ i }}{% if query %}&q={{ query }}{% endif %}">{{ i }}</a></li>
              {% endif %}
          {% endfor %}
    
          {% if subcategories.has_next %}
          <li class="page-item">
              <a class="page-link" href="?page={{ subcategories.next_page_number }}{% if query %}&q={{ query }}{% endif %}">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</a>
          </li>
          <li class="page-item">
              <a class="page-link" href="?page={{ subcategories.paginator.num_pages }}{% if query %}&q={{ query }}{% endif %}">‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</a>
          </li>
          {% endif %}
      </ul>
    </nav>
  </div>
</div>

{% endblock %}